Client connects to running server

Server stores the directory in its PWD
Client passes in directory to sync + serverIP

Client sends dirName + modifiedTime
Server sends Exists or not
If file exists on server && server modified last
   update client file
else
   update server file
move to next file

Server sends dirName
Client sends exists or not
if does not exist
   ask if would like to delete servers copy
   if yes
     delete server copy
   if no
     send server copy to client
   if noALL
     set noAll flag and always take servers copy
   else {default}
     do nothing
move to next file
end



2 way talking:

CLIENT: dirName
Server: exists = TRUE or FALSE
   
if directory
old   CLIENT: dirName
old   SERVER: true
old   CLIENT: isDirectory = TRUE
old   SERVER: true
old   CLIENT: PATH
old   SERVER: true

   CLIENT: VECTOR<STRING> = dirName, PATH
   SERVER: true
else
old   CLIENT: fileName
old   SERVER: true
old   CLIENT: isDirectory = FALSE
old   SERVER: true
old   CLIENT: PATH
old   SERVER: true
old   CLIENT: lastModified

   CLIENT: VECTOR<STRING> = fileName, PATH, lastModified
   SERVER: TRUE or FALSE (update?)
   if TRUE
      CLIENT: SEND FILE
      SERVER: TRUE
   else if FALSE
      CLIENT: TRUE
      SERVER: SEND FILE
      CLIENT: TRUE
      SERVER: SEND LAST MODIFIED
   end
end
SERVER: OK

CLIENT: DONE

// begin 2 way talking here.

if EXISTS = TRUE
   if directory
      SERVER: dirName DiR
      CLIENT: TRUE or FALSE
      if FALSE
         SERVER: TRUE
         CLIENT: ask user if he/she would like to delete servers copy
                 reply Y (delete) or N (get servers copy)
                 or D (do nothing)
         if Y
            SERVER: delete directory
         if N
            CLIENT: make directory
         if D
            do nothing
         end
      end
   else if TRUE
      SERVER: fileName
      CLIENT: TRUE or FALSE
      if TRUE
         SERVER: TRUE
         CLIENT: ask user if he/she would like to delete servers copy
                 reply Y (delete) or N (get servers copy)
                 or D (do nothing)
         if Y
            SERVER: delete file
         if N
            SERVER: SEND FILE
            CLIENT: OK
            SERVER: SEND LASTMODIFIED
            CLIENT: OK
         if D
            do nothing
         end
      end
   end
end

SERVER: DONE
